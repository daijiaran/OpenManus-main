# 豆包 API 配置说明

## 根据官方文档配置

根据豆包官方文档，有两种推理接入点类型：

### 1. 模型 ID（Model ID）- 简单方式

**适用场景**：使用 API Key 鉴权，简单快速

**特点**：
- 直接使用模型ID
- 仅支持 API Key 鉴权
- 不支持 Access Key 鉴权
- 配置简单

**如何获取**：
- 登录豆包控制台
- 获取模型 ID（格式通常类似：`doubao-lite-32k`、`doubao-pro-32k` 等）

### 2. Endpoint ID（端点ID/接入点ID）- 推荐方式

**适用场景**：需要灵活配置，使用 API Key 或 Access Key 鉴权

**特点**：
- 支持灵活的配置（限流、计费、监控等）
- 支持 API Key 和 Access Key 两种鉴权方式
- 功能更强大

**如何获取**：
- 登录豆包控制台
- 创建推理接入点
- 复制 Endpoint ID（格式类似：`doubao-seed-1-6-251015` 或 `ep-xxxxx`）

### 3. 使用哪种？

- **如果你使用 API Key**：可以使用 Model ID 或 Endpoint ID
- **如果你使用 Access Key**：必须使用 Endpoint ID

**建议**：推荐使用 Endpoint ID，功能更强大，兼容性更好。

### 2. API Key

有两种方式设置 API Key：

#### 方式一：环境变量（推荐）

```bash
# Windows PowerShell
$env:ARK_API_KEY = "你的API密钥"

# Windows CMD
set ARK_API_KEY=你的API密钥

# Linux/Mac
export ARK_API_KEY=你的API密钥
```

然后在配置文件中使用：
```toml
api_key = "YOUR_ARK_API_KEY"  # 会自动从环境变量读取
```

#### 方式二：直接写在配置文件中

```toml
api_key = "你的实际API密钥"
```

### 3. 配置文件示例

```toml
[llm]
api_type = "doubao"
model = "doubao-seed-1-6-251015"  # 替换为你的实际接入点 ID
base_url = "https://ark.cn-beijing.volces.com/api/v3"
api_key = "YOUR_ARK_API_KEY"  # 或直接写你的密钥
max_tokens = 8192
temperature = 0.0
```

### 4. 验证配置

运行测试脚本：
```bash
python test_doubao_connection.py
```

如果看到 `[OK] API 调用成功！`，说明配置正确。

### 5. 常见问题

**Q: 404 错误 - 模型不存在？**
A: 检查你的模型 ID 是否正确，确保是推理接入点 ID，不是其他 ID。

**Q: 认证失败？**
A: 检查 API Key 是否正确，确保有权限访问该接入点。

**Q: 502 错误？**
A: 可能是服务器临时问题，稍后重试。或检查 base_url 是否正确。

